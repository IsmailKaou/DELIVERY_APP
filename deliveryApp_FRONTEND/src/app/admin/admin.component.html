<div class="pt-18">
  <h2 class="text-3xl font-bold text-gray-800 m-8">Manage products</h2>
  <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
    <form class="flex items-center m-4 ml-6"></form>

    <button
      (click)="openDialog()"
      class="bg-[#007BFF] m-4 hover:bg-[#007BFF] text-white rounded-lg py-2 px-2"
    >
      + Add product
    </button>
  </div>
</div>

<section class="container px-4 mx-auto pt-5">
  <div class="flex flex-col">
    <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
        <div class="overflow-hidden border border-gray-200">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th
                  scope="col"
                  class="py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500"
                >
                  <div class="flex items-center"></div>
                </th>
                <th
                  scope="col"
                  class="px-4 py-3.5 m-8 text-sm font-normal text-left rtl:text-right text-gray-500 whitespace-nowrap"
                >
                  Product Name
                </th>
                <th
                  scope="col"
                  class="px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500"
                >
                  Price
                </th>
                <th
                  scope="col"
                  class="px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500"
                >
                  Description
                </th>

                <th
                  scope="col"
                  class="px-4 py-3.5 text-sm font-normal text-center rtl:text-right text-gray-500"
                >
                  Actions
                </th>
              </tr>
            </thead>

            <tbody
              class="bg-white divide-y divide-gray-200"
              *ngFor="
                let product of products
                  | paginate
                    : { itemsPerPage: itemsPerPage, currentPage: currentPage }
              "
            >
              <tr>
                <td
                  class="px-4 py-4 text-sm font-medium text-gray-700 whitespace-nowrap w-25"
                >
                  <div class="inline-flex items-center gap-x-1">
                    <div>
                      <img
                        [src]="
                          isCloudImg(product.imageURL)
                            ? product.imageURL
                            : '../../../assets/products/' +
                              product.imageURL +
                              '.jpeg'
                        "
                        class="rounded-lg"
                        alt="product"
                        width="70"
                      />
                    </div>
                  </div>
                </td>
                <td class="px-2 py-4 text-sm text-[#3874ff] whitespace-nowrap">
                  {{ product.name }}
                </td>
                <td class="px-2 py-4 text-sm text-gray-500 whitespace-nowrap">
                  {{ product.price | currency : "MAD" }}
                </td>
                <td
                  class="px-2 py-2 text-sm font-medium text-gray-700 w-15 h-10 w-1/2"
                >
                  <div>
                    <h2 class="text-sm font-normal">
                      {{ product.description }}
                    </h2>
                  </div>
                </td>

                <td class="px-6 py-6 flex whitespace-nowrap text-sm font-small">
                  <div class="inline-flex space-x-2">
                    <button
                      (click)="openUpdateDialog(product)"
                      class="bg-gray-200 text-gray-600 hover:text-gray-800 rounded-full py-1 px-3"
                    >
                      Edit
                    </button>
                    <button
                      (click)="openDeleteDialog(product.id)"
                      class="bg-red-200 text-red-600 hover:text-red-800 rounded-full py-1 px-3"
                    >
                      Remove
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <pagination-controls
    (pageChange)="currentPage = $event"
    class="flex justify-center my-4"
    previousLabelClass="px-3 py-2 bg-gray-200 text-gray-600 rounded-lg"
    nextLabelClass="px-3 py-2 bg-gray-200 text-gray-600 rounded-lg"
    containerClass="flex items-center space-x-2"
    pageClass="px-3 py-2 bg-gray-200 text-gray-600 rounded-full"
    currentPageClass="px-3 py-2 bg-blue-500 text-white rounded-lg"
    previousClass="px-3 py-2 bg-gray-200 text-gray-600 rounded-lg"
    nextClass="px-3 py-2 bg-gray-200 text-gray-600 rounded-lg"
  ></pagination-controls>
</section>
